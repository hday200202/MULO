# MULO Extensions Toolkit

This is a self-contained toolkit for developing MULO extensions. Everything you need to create new extensions is contained within this directory.

## Directory Structure

```
extensions/
├── CMakeLists.txt           # Build configuration for extensions
├── build.sh                 # Build script (builds in Release mode by default)
├── README.md               # This file
├── includes/               # Header files for extension development
│   ├── Application.hpp     # Main application interface
│   ├── Engine.hpp          # Audio engine interface
│   ├── MULOComponent.hpp   # Base component class and plugin interface
│   └── UIData.hpp          # UI state and theme definitions
├── src/                    # Source files
│   └── audio/
│       └── Engine.cpp      # Engine implementation
├── external/               # External dependencies (copied from main project)
│   ├── UILO/              # UI layout framework
│   ├── linux/JUCE/        # JUCE framework (Linux)
│   ├── mac/JUCE/          # JUCE framework (macOS)
│   └── windows/JUCE/      # JUCE framework (Windows)
├── extensions_src/         # Your extension source files go here
│   ├── TimelineComponent.hpp
│   ├── SettingsComponent.hpp
│   ├── MixerComponent.hpp
│   ├── AppControls.hpp
│   ├── FileBrowserComponent.hpp
│   └── KBShortcuts.hpp
├── bin/                    # Output directory for built extensions
│   ├── Linux/
│   │   ├── Debug/
│   │   ├── Release/
│   │   ├── RelWithDebInfo/
│   │   └── MinSizeRel/
│   ├── Windows/
│   └── Darwin/
└── build/                  # CMake build files (auto-generated)
```

## Creating a New Extension

1. **Create your component header file in `extensions_src/`** (e.g., `extensions_src/MyComponent.hpp`):
```cpp
#pragma once
#include "MULOComponent.hpp"

class MyComponent : public MULOComponent {
public:
    MyComponent() { name = "mycomponent"; }
    
    void init() override {
        // Initialize your component
    }
    
    void update() override {
        // Update logic
    }
    
    bool handleEvents() override {
        // Handle events
        return false;
    }
    
    Container* getLayout() override {
        return layout;
    }

private:
    // Your component implementation
};

// Plugin interface - REQUIRED for extensions
DECLARE_PLUGIN(MyComponent)
```

2. **Build your extension** (wrapper .cpp files are created automatically):
```bash
# Default (Release mode)
./build.sh

# Specific build types
./build.sh release    # Release build (optimized)
./build.sh debug      # Debug build (with symbols)
./build.sh rdbi       # RelWithDebInfo (optimized + debug)

# Clean build
./build.sh clean      # Clean build directory
./build.sh clean release  # Clean and build Release
```

That's it! The build system will:
- Automatically discover your `.hpp` file in `extensions_src/`
- Generate a wrapper `.cpp` file
- Build your extension to `bin/{Platform}/{BuildType}/libMyComponent.so`

**No manual CMakeLists.txt editing required!** Just drop your `.hpp` file in `extensions_src/` and build.

## Available APIs

### MULOComponent Base Class
All extensions inherit from `MULOComponent` which provides:
- Access to the main application (`app`)
- Access to the audio engine (`engine`) 
- Access to UI resources and themes (`resources`)
- UI state management (`state`)
- Container-based UI layout system

### Engine API
The Engine provides full audio functionality:
- Track management (`createTrack`, `getAllTracks`)
- Audio clip handling (`addClip`, `removeClip`)
- Playback control (`play`, `pause`, `stop`)
- Audio processing and effects
- Waveform generation and rendering

### UI Framework (UILO)
Container-based UI system with:
- Layout containers (`row`, `column`, `scrollableRow`)
- UI elements (`button`, `slider`, `text`)
- Styling and theming
- Event handling

## Build Modes

- **Release** (default): Optimized, no debug symbols, stable - **RECOMMENDED**
- **Debug**: Debug symbols, slower, may cause desktop environment issues on some systems
- **RelWithDebInfo**: Release optimizations with debug info
- **MinSizeRel**: Optimized for size

Build commands:
```bash
./build.sh            # Release (default, recommended)
./build.sh debug      # Debug mode
./build.sh rdbi       # RelWithDebInfo  
./build.sh clean      # Clean build directory
```

## Extension Loading

Extensions are automatically discovered and loaded by the main MULO application when placed in the `plugins/` directory. The plugin interface (`getPluginInterface`) is automatically generated by the `DECLARE_PLUGIN` macro.

## Examples

Study the existing extension examples:
- **TimelineComponent**: Complex timeline with tracks, clips, and waveforms
- **MixerComponent**: Audio mixer with volume and pan controls  
- **SettingsComponent**: Settings dialog with themes and configuration
- **FileBrowserComponent**: File browser for loading audio files
- **AppControls**: Playback controls (play, pause, stop)
- **KBShortcuts**: Keyboard shortcut handling

Each demonstrates different aspects of the extension API and UI framework.
